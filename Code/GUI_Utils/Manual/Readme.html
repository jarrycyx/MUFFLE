<!DOCTYPE html><html><head>
      <title>Readme</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\jarrycyx\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.11\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="muffle-gui-manual">MUFFLE GUI Manual </h1>
<p>A GUI application for our paper <strong>"Supervised multi-frame dual-channel denoising enables long-term single-molecule FRET under extremely low photon budget"</strong>.</p>
<h3 id="tldr-just-click-the-reconstruct-with-muffle-button-to-enhance-the-preloaded-videos">TL;DR: Just click the "Reconstruct with MUFFLE" button to enhance the preloaded videos. </h3>
<p><img src="image.png" alt="Alt text"></p>
<h2 id="compatibility">Compatibility </h2>
<p>If you have a GPU which supports CUDA &gt;= 12.1, we recommend <strong>running binary application on GPU</strong>. Otherwise please <strong>run binary application on CPU</strong>. If you have a GPU with CUDA &lt; 12.1 or you want custom environment settings, please <strong>run the python script</strong> instead (you may still be able to run the binary but is not guaranteed).</p>
<ol>
<li><strong>Running binary application on CPU</strong>
<ul>
<li>No additional requirements needed.</li>
<li>Double-click the "MUFFLE_GUI.exe" file to launch the GUI.</li>
<li><strong>Note: The reconstruction process will be extremely slow on CPU. Not recommended for formal use.</strong></li>
</ul>
</li>
<li><strong>Running binary application on GPU with CUDA &gt;= 12.1 support (recommended)</strong>
<ul>
<li>Make sure that the GPU device has CUDA support. Check <a href="https://developer.nvidia.com/cuda-gpus">here</a> for a list of supported GPUs.</li>
<li>Install CUDA &gt;= 12.1 from <a href="https://developer.nvidia.com/cuda-downloads?target_os=Windows&amp;target_arch=x86_64">here</a>.</li>
<li>Double-click the "MUFFLE_GUI.exe" file to launch the GUI.</li>
</ul>
</li>
<li><strong>Running the python script</strong>
<ul>
<li>Install the following packages:
<ul>
<li><a href="https://pypi.org/project/PyQt5/">PyQt5</a></li>
<li><a href="https://pytorch.org/">PyTorch</a></li>
<li><a href="https://numpy.org/">Numpy</a></li>
<li><a href="https://pypi.org/project/tifffile/">Tifffile</a></li>
<li>Other packages: see <a href="requirements.txt">requirements.txt</a></li>
</ul>
</li>
<li>Run the python script "MUFFLE_GUI.py" to launch the GUI.</li>
</ul>
</li>
</ol>
<p>We have tested the compatibility of the GUI application on the following platforms:</p>
<ul>
<li>Intel / AMD CPUs on Windows 10 / Windows 11</li>
<li>NVIDIA GTX 1080Ti (driver 536.99) on Windows 11</li>
<li>NVIDIA GTX 1050 (driver 546.33) on Windows 10</li>
<li><strong>Report the compatibility</strong> of the application on other platforms by adding an issue.</li>
</ul>
<hr>
<h2 id="usage">Usage </h2>
<p>MUFFLE GUI is a standalone application that can be run on Windows 10. The application can be run on CPU or GPU.</p>
<h3 id="step-1-load-input-videos">Step 1: Load Input Videos </h3>
<ul>
<li>Drag and drop the Acceptor dark video file onto the "Acceptor dark" video viewer. The input video can <strong>either be a single 3-Dim tiff file or a folder containing multiple tiff frames.</strong></li>
<li>Drag and drop the Donor dark video file onto the "Donor dark" video viewer.</li>
<li>The file paths for both videos will be displayed above their respective viewers.</li>
</ul>
<p><img src="image-1.png" alt="Alt text"></p>
<hr>
<h3 id="step-2-set-linear-gain">Step 2: Set Linear Gain </h3>
<p>The linear gain is used to adjust the brightness of the input videos and is applied to both videos. <strong>Please adjust the linear gain to ensure that the input videos are not too dark or too bright.</strong> The following reconstruction process will maintain the brightness of the input videos. The default value is 10.</p>
<ul>
<li>Adjust the "Linear Gain" input field to control the linear gain for both videos.</li>
<li>Use the "Set Linear Gain" button to apply the chosen gain.</li>
</ul>
<p><img src="image-2.png" alt="Alt text"></p>
<hr>
<h3 id="step-3-view-videos">Step 3: View Videos </h3>
<ul>
<li>Each frame of the input videos will be padded with a black border to a square shape.</li>
<li><strong>Adjust the sliders</strong> to navigate through the frames.</li>
<li>If you find that the videos are too dark or too bright, please adjust the linear gain.</li>
<li>After the reconstruction process, the reconstructed videos will be displayed in the "Reconstructed Acceptor" and "Reconstructed Donor" video viewers.</li>
</ul>
<p><img src="image-3.png" alt="Alt text"></p>
<hr>
<h3 id="step-4-set-model-path">Step 4: Set Model Path </h3>
<p>We provide a pretrained MUFFLE model for dual-channel video enhancement. The model file is placed alongside the YAML configuration file in the "MUFFLE_Model" folder.</p>
<p>To use a custom MUFFLE model, please refer to the <a href="">MUFFLE</a> repository for details on training a custom model. Please ensure that the model file and its corresponding YAML configuration file are placed in the same folder.</p>
<p><strong>Set MUFFLE Model File:</strong></p>
<ul>
<li>Click the "Browse MUFFLE model file" button.</li>
<li>Choose the MUFFLE model file (with a .pkl extension) and its corresponding configuration file (with a .yaml extension).</li>
<li>Confirm the model file path displayed below.</li>
</ul>
<p><img src="image-4.png" alt="Alt text"></p>
<hr>
<h3 id="step-5-set-output-folder">Step 5: Set Output Folder </h3>
<p>The enhanced videos will be saved in the output folder as 3-Dim tiff files. The default output folder is the "Output" folder in the current directory.</p>
<p><strong>Set Output Folder:</strong></p>
<ul>
<li>Click the "Browse Output Folder" button.</li>
<li>Select the folder where enhanced videos will be saved.</li>
<li>Confirm the output folder path displayed below.</li>
</ul>
<p><img src="image-5.png" alt="Alt text"></p>
<hr>
<h3 id="step-6-select-device">Step 6: Select Device </h3>
<p>We recommend using a GPU device for video enhancement. Running MUFFLE on CPU is supported but will be extremely slow. If you cannot find your GPU device in the list, please check that CUDA is installed correctly and your GPU device is supported (see Step 1).</p>
<ul>
<li>Choose a CPU/GPU device from the list of available devices.</li>
<li>This device will be used for video enhancement.<br>
<img src="image-6.png" alt="Alt text"></li>
</ul>
<hr>
<h3 id="step-7-reconstruct-with-muffle">Step 7: Reconstruct with MUFFLE </h3>
<ul>
<li>Click the <strong>"Reconstruct with MUFFLE"</strong> button.</li>
<li>The progress bar will show the enhancement progress.</li>
<li>Note: if you are running MUFFLE on CPU, the reconstruction process will be extremely slow. Not recommended for formal use.</li>
</ul>
<p><img src="image.png" alt="Alt text"></p>
<hr>
<h3 id="step-9-explore-output-folder">Step 9: Explore Output Folder </h3>
<ul>
<li>Click the <strong>"Open folder"</strong> button in the success message to open the output folder in File Explorer.</li>
<li>The reconstructed videos will be saved in this folder.</li>
</ul>
<p><img src="image-7.png" alt="Alt text"></p>
<hr>
<h3 id="note">Note: </h3>
<ul>
<li><strong>Error Handling:</strong>
<ul>
<li>If an error occurs during the reconstruction process, an error message will be displayed. Please review the error message for details.</li>
<li>If you encounter an error, please check that the input videos are in the correct format and the MUFFLE model file is valid.</li>
<li>If you are still unable to resolve the error, please contact us by adding an issue.</li>
</ul>
</li>
</ul>
<h3 id="updates">Updates: </h3>
<h4 id="ver-100-2024-01-28">Ver. 1.0.0 (2024-01-28) </h4>
<ul>
<li>Initial release.</li>
</ul>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>